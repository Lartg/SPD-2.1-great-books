generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = "mysql://root:@localhost:3306/great_reads"
}

model Book {
  id            Int            @id @default(autoincrement())
  title         String?        @db.VarChar(255)
  OLID          String         @db.VarChar(255)
  pageCount     String?
  publishedDate String?
  imagePath     String?
  createdAt     DateTime       @default(now()) @db.DateTime(0)
  updatedAt     DateTime       @default(now()) @db.DateTime(0)
  bookList      BookList[]
  Review        Review[]
  BookProgress  BookProgress[]
  BooklistBook  BooklistBook[]
}

model User {
  id           Int            @id @default(autoincrement())
  email        String         @db.VarChar(255)
  createdAt    DateTime       @default(now()) @db.DateTime(0)
  updatedAt    DateTime       @default(now()) @db.DateTime(0)
  bookList     BookList[]
  Review       Review[]
  BookProgress BookProgress[]
}

model BookList {
  id           Int            @id @default(autoincrement())
  title        String         @db.VarChar(255)
  description  String         @db.VarChar(255)
  userId       Int            @db.Int
  createdAt    DateTime       @default(now()) @db.DateTime(0)
  updatedAt    DateTime       @default(now()) @db.DateTime(0)
  Book         Book?          @relation(fields: [bookId], references: [id])
  bookId       Int?
  User         User           @relation(fields: [userId], references: [id])
  BooklistBook BooklistBook[]
}

model BooklistBook {
  id         Int      @id @default(autoincrement())
  bookList   BookList @relation(fields: [bookListId], references: [id])
  bookListId Int
  book       Book     @relation(fields: [bookId], references: [id])
  bookId     Int
  createdAt  DateTime @default(now()) @db.DateTime(0)
  updatedAt  DateTime @default(now()) @db.DateTime(0)
}

model Review {
  id        Int      @id @default(autoincrement())
  title     String   @db.VarChar(255)
  content   String   @db.VarChar(255)
  rating    Int      @db.Int
  user      User     @relation(fields: [userId], references: [id])
  userId    Int
  book      Book     @relation(fields: [bookId], references: [id])
  bookId    Int
  createdAt DateTime @default(now()) @db.DateTime(0)
  updatedAt DateTime @default(now()) @db.DateTime(0)
}

model BookProgress {
  id        Int      @id @default(autoincrement())
  lastPage  Int      @db.Int
  user      User     @relation(fields: [userId], references: [id])
  userId    Int
  book      Book     @relation(fields: [bookId], references: [id])
  bookId    Int
  createdAt DateTime @default(now()) @db.DateTime(0)
  updatedAt DateTime @default(now()) @db.DateTime(0)
}
